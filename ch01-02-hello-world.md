## Привет, мир!

Теперь, когда Rust установлен, пришло время написать вашу первую программу на Rust.
Традиционно при изучении нового языка пишут небольшую программу, которая выводит
на экран текст `Hello, world!` — сделаем так и мы!

> Примечание: В этой книге предполагается базовое знакомство с командной строкой.
> Rust не накладывает ограничений на инструменты или место хранения кода,
> поэтому если вы предпочитаете использовать интегрированную среду разработки (IDE),
> смело пользуйтесь ей. Многие IDE сейчас поддерживают Rust, подробности смотрите в документации IDE.
> Команда Rust сосредоточилась на отличной поддержке через `rust-analyzer`. Подробнее в [Приложении D][devtools].

### Создание каталога проекта

Начнём с создания каталога для хранения вашего Rust-кода. Rust не требует конкретного
места для проектов, но для упражнений и проектов книги мы рекомендуем создать
папку _projects_ в домашнем каталоге и хранить все проекты там.

Откройте терминал и введите команды, чтобы создать папку _projects_ и внутри неё
папку для проекта «Hello, world!».

Для Linux, macOS и PowerShell на Windows:

```console
$ mkdir ~/projects
$ cd ~/projects
$ mkdir hello_world
$ cd hello_world
```

Для Windows CMD:

```cmd
> mkdir "%USERPROFILE%\projects"
> cd /d "%USERPROFILE%\projects"
> mkdir hello_world
> cd hello_world
```

### Написание и запуск программы на Rust

Создайте новый исходный файл с именем _main.rs_. Файлы Rust всегда имеют расширение _.rs_.
Если в имени несколько слов, принято использовать подчёркивания, например _hello_world.rs_,
а не _helloworld.rs_.

Откройте файл _main.rs_ и введите следующий код из листинга 1-1.

<Listing number="1-1" file-name="main.rs" caption="Программа, выводящая `Hello, world!`">

```rust
fn main() {
    println!("Hello, world!");
}
```

</Listing>

Сохраните файл и вернитесь в терминал в директории _~/projects/hello_world_.
Для Linux или macOS выполните команды:

```console
$ rustc main.rs
$ ./main
Hello, world!
```

На Windows введите вместо `./main`:

```powershell
> rustc main.rs
> .\main
Hello, world!
```

Вне зависимости от ОС, в терминале должен появиться текст `Hello, world!`.
Если вывода нет — смотрите раздел [«Решение проблем»][troubleshooting] в главе об установке.

Если вы увидели `Hello, world!`, поздравляем — вы написали свою первую программу на Rust!
Теперь вы Rust-программист — добро пожаловать!

### Устройство программы на Rust

Разберём программу подробнее. Вот первая часть:

```rust
fn main() {

}
```

Здесь определяется функция с именем `main`. Эта функция особенная: она всегда
запускается первой в каждом исполняемом Rust-приложении. Первая строка объявляет
функцию `main` без параметров и возвращаемого значения. Если бы параметры были, они
бы шли в круглых скобках `()`.

Тело функции заключается в фигурные скобки `{}`. Rust требует их для всех функций.
По стилю открывающую скобку принято ставить на той же строке, что и объявление функции,
отделяя одним пробелом.

> Примечание: Чтобы придерживаться стандарта форматирования Rust-кода, можно
> использовать автоматический форматтер `rustfmt` (подробнее о нем в [Приложении D][devtools]).
> Этот инструмент поставляется вместе с Rust и, скорее всего, уже установлен у вас.

В теле функции находится код:

```rust
println!("Hello, world!");
```

Эта строка делает всю работу программы — выводит текст на экран. Обратите внимание на три момента.

Во-первых, `println!` — это вызов макроса Rust. Если бы это была функция, она бы
вызывалась как `println` без `!`. Макросы позволяют генерировать код и расширять
синтаксис Rust, о них подробнее в [главе 20][ch20-macros]. Сейчас достаточно знать,
что `!` означает вызов макроса, а не обычной функции, и макросы имеют свои правила.

Во-вторых, `"Hello, world!"` — строка, передаваемая макросу `println!` для вывода.

В-третьих, строка заканчивается точкой с запятой `;`, которая завершает выражение.
Большинство строк в Rust заканчиваются точкой с запятой.

### Компиляция и запуск — разные шаги

Вы только что запустили программу, давайте разберёмся с процессом.

Для запуска программы её сначала надо скомпилировать компилятором Rust:

```console
$ rustc main.rs
```

Если знакомы с C/C++, это похоже на `gcc` или `clang`. При успешной компиляции Rust создаёт исполняемый файл.

В Linux, macOS и PowerShell введите команду `ls`, чтобы увидеть файлы:

```console
$ ls
main  main.rs
```

В Linux и macOS вы увидите два файла. В PowerShell и CMD на Windows:

```cmd
> dir /B
main.exe
main.pdb
main.rs
```

Это исходный файл `.rs`, исполняемый файл (`main.exe` в Windows, `main` в других ОС)
и, на Windows, файл с отладочной информацией `.pdb`.

Запускайте программу так:

```console
$ ./main  # в Windows: .\main
```

Если это программа из листинга 1-1, вы увидите в терминале `Hello, world!`.

В динамических языках, таких как Ruby, Python или JavaScript, компиляция и запуск
— одна команда. Rust — язык с компиляцией заранее (ahead-of-time), что позволяет
передать кому-то готовый исполняемый файл, который можно запустить без Rust.

Просто компиляции `rustc` достаточно для простых программ, но для больших проектов
лучше использовать инструмент Cargo, который упростит управление проектом.
Мы познакомимся с ним дальше.

[troubleshooting]: ch01-01-installation.html#troubleshooting
[devtools]: appendix-04-useful-development-tools.html
[ch20-macros]: ch20-05-macros.html
