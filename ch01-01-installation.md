## Установка

Первый шаг — установить Rust. Мы загрузим Rust через `rustup` — командный инструмент для управления версиями Rust и связанными с ним инструментами. Для загрузки потребуется подключение к интернету.

> Примечание: Если вы по какой-то причине не хотите использовать `rustup`, смотрите [страницу с другими методами установки Rust][otherinstall].

Следующие шаги устанавливают последнюю стабильную версию компилятора Rust. Гарантии стабильности Rust означают, что все примеры в этой книге, которые компилируются, продолжат компилироваться и в новых версиях Rust. Вывод может немного отличаться между версиями, так как Rust часто улучшает сообщения об ошибках и предупреждения. Другими словами, любая новая стабильная версия Rust, установленная по этим инструкциям, должна работать с материалом книги.

> ### Обозначения командной строки
>
> В этой главе и далее по книге мы показываем команды для терминала. Строки, которые нужно вводить в терминале, начинаются с `$`. Вам не нужно вводить сам знак `$` — это просто приглашение командной строки. Строки без `$` — это обычно вывод предыдущей команды. В примерах для PowerShell вместо `$` используется `>`.

### Установка `rustup` на Linux или macOS

Если вы используете Linux или macOS, откройте терминал и введите следующую команду:

```console
$ curl --proto '=https' --tlsv1.2 https://sh.rustup.rs -sSf | sh
```

Эта команда скачает скрипт и запустит установку инструмента `rustup`, который установит последнюю стабильную версию Rust. Возможно, вас попросят ввести пароль. Если установка прошла успешно, появится сообщение:

```text
Rust is installed now. Great!
```

Также понадобится _линкер_ — программа, которую Rust использует для объединения скомпилированных частей в один файл. Скорее всего, у вас он уже есть. Если появляются ошибки с линкером, установите C-компилятор, который обычно включает линкер. C-компилятор полезен ещё и потому, что некоторые распространённые пакеты Rust зависят от C-кода и требуют его компиляции.

На macOS можно установить C-компилятор командой:

```console
$ xcode-select --install
```

Пользователям Linux рекомендуется установить GCC или Clang, согласно документации вашей дистрибуции. Например, в Ubuntu можно установить пакет `build-essential`.

### Установка `rustup` на Windows

На Windows перейдите по адресу [https://www.rust-lang.org/tools/install][install] и следуйте инструкциям по установке Rust. На одном из этапов вас попросят установить Visual Studio — это обеспечит линкер и нативные библиотеки для компиляции программ. Если нужна помощь, смотрите [https://rust-lang.github.io/rustup/installation/windows-msvc.html][msvc].

Далее в книге команды приводятся, которые работают в _cmd.exe_ и PowerShell. Если есть особенности, мы их укажем.

### Решение проблем

Чтобы проверить правильность установки Rust, откройте оболочку и введите:

```console
$ rustc --version
```

Должна появиться версия компилятора с информацией в формате:

```text
rustc x.y.z (abcabcabc yyyy-mm-dd)
```

Если это так — Rust установлен успешно! Если нет — проверьте, что Rust добавлен в системную переменную `%PATH%`.

В Windows CMD используйте:

```console
> echo %PATH%
```

В PowerShell:

```powershell
> echo $env:Path
```

В Linux и macOS:

```console
$ echo $PATH
```

Если всё верно, но Rust всё равно не работает, обратитесь за помощью к сообществу Rust — [страница сообщества][community].

### Обновление и удаление

После установки через `rustup` обновление Rust происходит просто — выполните в терминале:

```console
$ rustup update
```

Чтобы удалить Rust и `rustup`, выполните:

```console
$ rustup self uninstall
```

### Локальная документация

Установка Rust включает локальную копию документации, доступную офлайн. Запустите:

```console
$ rustup doc
```

для открытия локальной документации в браузере.

Если вы не уверены, что делает та или иная функция или тип из стандартной библиотеки, обращайтесь к документации API!

### Текстовые редакторы и интегрированные среды разработки (IDE)

В книге не делается предположений, какими инструментами вы пользуетесь для написания кода на Rust. Почти любой текстовый редактор подойдёт! Однако многие редакторы и IDE имеют встроенную поддержку Rust. Актуальный список можно найти на [странице инструментов][tools] сайта Rust.

### Работа с книгой офлайн

В некоторых примерах используются пакеты Rust, выходящие за рамки стандартной библиотеки. Для работы с ними вам понадобится интернет или заранее скачанные зависимости. Чтобы загрузить зависимости заранее, выполните:

```console
$ cargo new get-dependencies
$ cd get-dependencies
$ cargo add rand@0.8.5 trpl@0.2.0
```

Это сохранит пакеты в кэше, и в дальнейшем не потребуется загрузка из сети. После этого папку `get-dependencies` можно удалить. С этими пакетами вы сможете запускать команды `cargo` с флагом `--offline` для работы без интернета.

[otherinstall]: https://forge.rust-lang.org/infra/other-installation-methods.html
[install]: https://www.rust-lang.org/tools/install
[msvc]: https://rust-lang.github.io/rustup/installation/windows-msvc.html
[community]: https://www.rust-lang.org/community
[tools]: https://www.rust-lang.org/tools
